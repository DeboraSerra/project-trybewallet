(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{32:function(e,t,a){e.exports=a(54)},41:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(17),c=a.n(l),i=a(19),o=a(7),s=(a(41),a(2)),u=a(15),d=a(10),p=a(11),m=a(13),h=a(12),E=a(21),b=a.n(E),v=a(28),g=function(e){return{type:"RESPONSE_SUCCESS",payload:e}},f=function(){return function(){var e=Object(v.a)(b.a.mark((function e(t){var a,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"IS_LOADING"}),e.prev=1,e.next=4,fetch("https://economia.awesomeapi.com.br/json/all");case 4:return a=e.sent,e.next=7,a.json();case 7:n=e.sent,r=Object.keys(n).filter((function(e){return"USDT"!==e})),t(g(r)),t({type:"GET_EXCHANGE",payload:n}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t({type:"RESPONSE_FAIL",payload:e.t0.message});case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}()},y=(a(43),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(u.a)({},n,r),(function(){e.validateForm()}))},e.validateForm=function(){var t=e.state,a=t.email,n=t.password,r=a.match(/[\w.!#$%&'*+=?^_`{|}~-]+@[\w.-]+\.[A-Z]{2,}/gim),l=n.length>=6;e.setState({isValid:r&&l})},e.sendLogin=function(t){t.preventDefault();var a=e.props,n=a.dispatch,r=a.history;n(function(e){return{type:"ADD_USER",payload:e}}(e.state.email)),r.push("/trybewallet/carteira")},e.state={email:"",password:"",isValid:!1},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.isValid;return r.a.createElement("form",{onSubmit:this.sendLogin,className:"login-form"},r.a.createElement("input",{className:"login-input",type:"email",name:"email",value:t,onChange:this.handleChange,"data-testid":"email-input",placeholder:"E-mail"}),r.a.createElement("input",{className:"login-input",type:"password",name:"password",value:a,onChange:this.handleChange,"data-testid":"password-input",placeholder:"Password"}),r.a.createElement("button",{className:"login-btn",type:"submit",onClick:this.sendLogin,disabled:!n},"Entrar"))}}]),a}(r.a.Component)),O=Object(o.b)()(y),j=(a(44),Object(o.b)((function(e){return{email:e.user.email,expenses:e.wallet.expenses,currency:e.wallet.currency}}))((function(e){var t=e.email,a=e.expenses,n=e.currency,l=a.map((function(e){return{value:parseFloat(e.value),rate:parseFloat(e.exchangeRates[e.currency].ask)}})).reduce((function(e,t){return e+t.value*t.rate}),0);return r.a.createElement("header",null,r.a.createElement("p",{"data-testid":"email-field"},t),r.a.createElement("p",null,"R$"," ",r.a.createElement("span",{"data-testid":"total-field"},l.toFixed(2))," ",r.a.createElement("span",{"data-testid":"header-currency-field"},n)))}))),x=Object(o.b)((function(e){return{currencies:e.wallet.currencies}}))((function(e){var t=e.currencies,a=e.handleChange,n=e.value;return r.a.createElement("label",{htmlFor:"currency"},r.a.createElement("span",{className:"label"},"Moeda"),r.a.createElement("select",{className:"wallet-select",id:"currency",name:"currency",onChange:a,value:n,"data-testid":"currency-input"},t.map((function(e){return r.a.createElement("option",{value:e,key:e},e)}))))})),w=(a(45),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("section",{className:"load-sect"},r.a.createElement("p",{className:"loading"}))}}]),a}(r.a.Component)),C=(a(46),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.expenses,a=e.dispatch,n=e.editExpense;return r.a.createElement("section",{className:"table"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir"))),r.a.createElement("tbody",null,t.map((function(e){var t=e.description,l=e.tag,c=e.method,i=e.value,o=e.currency,s=e.exchangeRates,u=e.id;return r.a.createElement("tr",{key:u},r.a.createElement("td",null,t),r.a.createElement("td",null,l),r.a.createElement("td",null,c),r.a.createElement("td",null,parseFloat(i).toFixed(2)),r.a.createElement("td",null,s[o].name.split("/")[0]),r.a.createElement("td",null,parseFloat(s[o].ask).toFixed(2)),r.a.createElement("td",null,(parseFloat(i)*parseFloat(s[o].ask)).toFixed(2)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{className:"table-btn edit",type:"button","data-testid":"edit-btn",onClick:function(){return n(e)}},"Editar"),r.a.createElement("button",{className:"table-btn delete",type:"button","data-testid":"delete-btn",onClick:function(){return a(function(e){return{type:"REMOVE_EXPENSE",id:e}}(u))}},"Excluir")))})))))}}]),a}(r.a.Component)),S=Object(o.b)((function(e){return{expenses:e.wallet.expenses}}))(C),N=(a(47),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(u.a)({},n,r))},e.sendExpense=function(t){t.preventDefault();var a=e.props.dispatch;a(f());var n=e.props.price,r=e.state,l=r.value,c=r.description,i=r.currency,o=r.method,s=r.tag,u=r.id,d=r.lastId,p=r.exchangeRates;a({type:"ADD_EXPENSE",payload:{id:u,value:l,description:c,currency:i,method:o,tag:s,exchangeRates:p||n}}),e.setState({value:0,description:"",currency:"USD",method:"",tag:"alimentacao",id:u<d?d:u+1,lastId:u,change:!1,exchangeRates:null})},e.editExpense=function(t){var a=e.state.id;e.setState({value:t.value,description:t.description,currency:t.currency,method:t.method,tag:t.tag,id:t.id,lastId:a,change:!0,exchangeRates:t.exchangeRates})},e.state={value:0,description:"",currency:"USD",method:"",tag:"alimentacao",id:0,lastId:null,change:!1,exchangeRates:null},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(f())}},{key:"render",value:function(){var e=this.props.isLoading,t=this.state,a=t.value,n=t.description,l=t.currency,c=t.method,i=t.tag,o=t.change;return r.a.createElement("section",null,r.a.createElement(j,null),r.a.createElement("form",{onSubmit:this.sendExpense,className:"data-form"},r.a.createElement("input",{className:"wallet-input","data-testid":"value-input",type:"number",name:"value",value:a,onChange:this.handleChange,placeholder:"Value"}),r.a.createElement("input",{className:"wallet-input","data-testid":"description-input",type:"text",name:"description",value:n,onChange:this.handleChange,placeholder:"Description"}),r.a.createElement(x,{value:l,handleChange:this.handleChange}),r.a.createElement("select",{className:"wallet-select",value:c,onChange:this.handleChange,name:"method","data-testid":"method-input"},r.a.createElement("option",{value:"Dinheiro"},"Dinheiro"),r.a.createElement("option",{value:"Cart\xe3o de cr\xe9dito"},"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",{value:"Cart\xe3o de d\xe9bito"},"Cart\xe3o de d\xe9bito")),r.a.createElement("select",{className:"wallet-select",value:i,onChange:this.handleChange,name:"tag","data-testid":"tag-input"},r.a.createElement("option",{value:"Alimenta\xe7\xe3o"},"Alimenta\xe7\xe3o"),r.a.createElement("option",{value:"Lazer"},"Lazer"),r.a.createElement("option",{value:"Trabalho"},"Trabalho"),r.a.createElement("option",{value:"Transporte"},"Transporte"),r.a.createElement("option",{value:"Sa\xfade"},"Sa\xfade")),r.a.createElement("button",{className:"wallet-btn",type:"submit",onClick:this.sendExpense},o?"Editar despesa":"Adicionar despesa")),e&&r.a.createElement(w,null),r.a.createElement(S,{editExpense:this.editExpense}))}}]),a}(r.a.Component)),R=Object(o.b)((function(e){return{isLoading:e.wallet.isLoading,price:e.wallet.exchangeRates,expenses:e.wallet.expenses}}))(N);a(48);var k=function(){return r.a.createElement("section",null,r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/trybewallet/",component:O}),r.a.createElement(s.a,{path:"/trybewallet/carteira",component:R})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var D=a(9),L=a(29),F=a(30),_=a(3),A={email:""},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER":return Object(_.a)(Object(_.a)({},e),{},{email:t.payload});default:return e}},P=a(31),T={currency:"BRL",currencies:[],expenses:[],error:"",isLoading:!1,exchangeRates:{}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS_LOADING":return Object(_.a)(Object(_.a)({},e),{},{isLoading:!0});case"RESPONSE_SUCCESS":return Object(_.a)(Object(_.a)({},e),{},{currencies:t.payload,isLoading:!1,error:""});case"RESPONSE_FAIL":return Object(_.a)(Object(_.a)({},e),{},{currencies:[],isLoading:!1,error:t.payload});case"ADD_EXPENSE":return Object(_.a)(Object(_.a)({},e),{},{expenses:e.expenses.some((function(e){return e.id===t.payload.id}))?e.expenses.map((function(e){return e.id===t.payload.id?Object(_.a)(Object(_.a)({},e),t.payload):e})):[].concat(Object(P.a)(e.expenses),[t.payload])});case"REMOVE_EXPENSE":return Object(_.a)(Object(_.a)({},e),{},{expenses:e.expenses.filter((function(e){return e.id!==t.id}))});case"GET_EXCHANGE":return Object(_.a)(Object(_.a)({},e),{},{exchangeRates:t.payload,isLoading:!1});default:return e}},V=Object(D.combineReducers)({user:I,wallet:M}),U=Object(D.createStore)(V,Object(L.composeWithDevTools)(Object(D.applyMiddleware)(F.a)));c.a.render(r.a.createElement(i.a,null,r.a.createElement(o.a,{store:U},r.a.createElement(k,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.1a20c331.chunk.js.map